<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Using Stratis: Frequently Asked Questions</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <link rel="stylesheet" href="style.css">
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<header>
<h1 class="title">Using Stratis: Frequently Asked Questions</h1>
</header>
<h3 id="why-do-new-filesystems-show-up-as-huge-1-terabyte-when-using-df">Why do new filesystems show up as huge (1 terabyte) when using <code>df</code>?</h3>
<p>Stratis filesystems are formatted with <a href="https://en.wikipedia.org/wiki/XFS">XFS</a>, but managed on behalf of the user. They show up in <code>df</code> as being the virtual size of the XFS filesystem. This is <em>not</em> the actual amount of space that the filesystem uses in the Stratis pool, due to “<a href="https://en.wikipedia.org/wiki/Thin_provisioning">thin provisioning</a>”. The actual space used by a filesystem can be shown using the <code>stratis filesystem list</code> command.</p>
<p>If the data in a filesystem actually approaches its virtual size, Stratis will automatically grow the filesystem.</p>
<h3 id="what-linux-storage-devices-can-i-use-for-stratis">What Linux storage devices can I use for Stratis?</h3>
<p>Stratis has been tested using block devices based on LUKS (crypto), LVM Logical Volumes, mdraid, dm-multipath, and iSCSI, as well as hard drives, SSDs, and NVMe storage devices.</p>
<p>Since Stratis contains a thin-provisioning layer, placing a pool on block devices that are already thinly-provisioned is not recommended.</p>
<p>Note: For iSCSI or other block devices requiring network, see <code>man systemd.mount</code> for info on the “_netdev&quot; mount option.</p>
<h3 id="how-do-i-mount-and-use-stratis-filesystems-once-theyve-been-created">How do I mount and use Stratis filesystems, once they’ve been created?</h3>
<p>Stratis pools and filesystems both are given names are part of the creation process. Stratis creates links to filesystems under <code>/dev/stratis/&lt;pool-name&gt;/&lt;filesystem-name&gt;</code>. These may be used in <code>/etc/fstab</code>, but if pools or filesystems are renamed in the future, be sure to update <code>/etc/fstab</code> accordingly. Alternatively you can use the <code>blkid</code> tool to get the XFS filesystem UUID, and use that, which remains constant across renames. See <code>man fstab</code> for more information.</p>
</body>
</html>
